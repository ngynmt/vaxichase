(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{138:function(e,t,n){},139:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(17),a=n.n(o),i=(n(138),n(27)),r=n(57),s=(n(139),n(211)),l=n(215),j=n(214),d=n(206),u=n(212),b=n(213),O=n(210),h=n(8);var p=function(e){var t=e.locations,n=e.reports;return Object(h.jsx)("div",{className:"gutters",children:Object(h.jsx)(d.a,{component:O.a,children:Object(h.jsxs)(s.a,{"aria-label":"simple table",children:[Object(h.jsx)(u.a,{children:Object(h.jsxs)(b.a,{children:[Object(h.jsx)(j.a,{children:"Location"}),Object(h.jsx)(j.a,{align:"right",children:"Attempts"}),Object(h.jsx)(j.a,{align:"right",children:"Success Rate"})]})}),Object(h.jsx)(l.a,{children:t.map((function(e){var t=null===n||void 0===n?void 0:n.filter((function(t){return t.locationId===e.id})).length,c=null===n||void 0===n?void 0:n.filter((function(t){return t.locationId===e.id&&t.success})).length,o=0===t?0:c/t*100;return Object(h.jsxs)(b.a,{children:[Object(h.jsx)(j.a,{component:"th",scope:"row",children:e.name}),Object(h.jsx)(j.a,{align:"right",children:t}),Object(h.jsx)(j.a,{align:"right",children:o+"%"})]},e.id)}))})]})})})};var m=function(){return Object(h.jsxs)("div",{className:"landing",children:[Object(h.jsx)("h1",{children:"Vaxichase"}),Object(h.jsx)("div",{className:"emojis",children:"\ud83d\udc89\ud83c\udfc3\u200d\u2642\ufe0f\ud83c\udfc3\u200d\u2640\ufe0f\ud83c\udfc3\ud83e\udda0"}),Object(h.jsx)("p",{children:"Did you know? Some COVID-19 vaccine doses are only usable for several hours after being thawed from their subzero storage temperature. Prevent the waste of these doses by sharing your successful and failed attempts to get a leftover dose at the end of the day at a specific location."})]})},v=n(66),f={height:"400px",position:"relative",width:"100%"};var g,x,y=Object(v.GoogleApiWrapper)({apiKey:"AIzaSyBUwWwjhKYVIqYQ2BuSAv-9QZWGthb8Wpc"})((function(e){var t=e.locations,n=e.reports,o=e.google,a=Object(c.useState)({}),r=Object(i.a)(a,2),s=r[0],l=r[1],j=Object(c.useState)(null),d=Object(i.a)(j,2),u=d[0],b=d[1],O=Object(c.useState)({name:""}),p=Object(i.a)(O,2),m=p[0],g=p[1],x=Object(c.useState)(!1),y=Object(i.a)(x,2),S=y[0],I=y[1];return Object(h.jsxs)(v.Map,{google:o,zoom:12,style:f,initialCenter:{lat:37.7749,lng:-122.4194},children:[t.map((function(e,t){return Object(h.jsx)(v.Marker,{name:e.name,onClick:function(t,n){return function(e,t,n){g(e),l(t),b(n),I(!0)}(t,n,e.id)},position:e.position},t)})),Object(h.jsx)(v.InfoWindow,{visible:S,marker:s,onClose:function(){return I(!1)},children:Object(h.jsxs)("div",{className:"marker-info",children:[Object(h.jsx)("h3",{children:m.name||"Vaccination Center"}),Object(h.jsxs)("p",{children:["Attempts: ",(null===n||void 0===n?void 0:n.filter((function(e){return e.locationId===u})).length)||0]}),Object(h.jsxs)("p",{children:["Success: ",(null===n||void 0===n?void 0:n.filter((function(e){return e.locationId===u&&e.success})).length)||0]}),Object(h.jsxs)("p",{children:["Failures: ",(null===n||void 0===n?void 0:n.filter((function(e){return e.locationId===u&&!e.success})).length)||0]})]})})]})})),S=n(220),I=n(218),w=n(216),N=n(43),C=n.n(N),k=n(87),A=n(86),$=n.n(A),L=n(118),B=n.n(L),E=n(219),R=n(221),W=n(222),q=n(224),D=n(223),M=n(217);var P,Q,V=function(e){var t=e.locations,n=C()(g||(g=Object(r.a)(["\n  mutation CreateLocation($name: String!, $id: String!, $position: LatLngInput!) {\n    createLocation(name: $name, id: $id, position: $position)\n  }\n  "]))),o=C()(x||(x=Object(r.a)(["\n    mutation CreateReport($success: Boolean!, $locationId: String!) {\n      createReport(success: $success, locationId: $locationId)\n    }\n  "]))),a=Object(w.useMutation)(n),s=Object(i.a)(a,1)[0],l=Object(w.useMutation)(o),j=Object(i.a)(l,1)[0],d=Object(c.useState)(""),u=Object(i.a)(d,2),b=u[0],O=u[1],p=Object(c.useState)(null),m=Object(i.a)(p,2),v=m[0],f=m[1],y=Object(c.useState)("true"),S=Object(i.a)(y,2),N=S[0],L=S[1];return Object(h.jsxs)("div",{className:"record-entry modal",children:[Object(h.jsx)("h1",{children:"Record Attempt"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=B()(v);0===t.filter((function(e){return e.id===n})).length&&s({variables:{name:b,id:n,position:v}}),j({variables:{success:"true"===N,locationId:n}}),window.location.reload()},children:[Object(h.jsx)($.a,{value:b,onChange:O,onSelect:function(e){O(e.split(",")[0]),Object(A.geocodeByAddress)(e).then((function(e){return Object(A.getLatLng)(e[0])})).then((function(e){return f(e)})).catch((function(e){return console.error("Error",e)}))},children:function(e){var t=e.getInputProps,n=e.suggestions,o=e.getSuggestionItemProps,a=e.loading;return Object(h.jsxs)("div",{children:[Object(h.jsx)(E.a,Object(k.a)({},t({label:"Enter vaccine location",className:"location-search-input"}))),Object(h.jsxs)("div",{className:"autocomplete-dropdown-container",children:[a&&Object(h.jsx)("div",{children:"Loading..."}),n.map((function(e,t){var n=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return Object(c.createElement)("div",Object(k.a)(Object(k.a)({},o(e,{className:n,style:a})),{},{key:t}),Object(h.jsx)("span",{children:e.description}))}))]})]})}}),Object(h.jsx)("section",{className:"form-section",children:Object(h.jsxs)(D.a,{component:"fieldset",children:[Object(h.jsx)(M.a,{component:"legend",children:"Did you successfully get vaccinated?"}),Object(h.jsxs)(W.a,{row:!0,className:"radio-group","aria-label":"success",value:N,onChange:function(e){return L(e.target.value)},children:[Object(h.jsx)(q.a,{value:"true",control:Object(h.jsx)(R.a,{}),label:"yes"}),Object(h.jsx)(q.a,{value:"false",control:Object(h.jsx)(R.a,{}),label:"no"})]})]})}),Object(h.jsx)(I.a,{disabled:!v,variant:"contained",color:"primary",className:"button--fw btn btn-primary px-5 my-2",type:"submit",children:"Submit"})]})]})},z=C()(P||(P=Object(r.a)(["\n  query locations {\n    locations {\n      id\n      name\n      position {\n        lat\n        lng\n      }\n    }\n  }\n"]))),G=C()(Q||(Q=Object(r.a)(["\n  query reports {\n    reports {\n      locationId\n      success\n    }\n  }\n"])));var J=function(){var e=Object(w.useQuery)(z),t=e.data,n=e.loading,o=e.error,a=Object(w.useQuery)(G),r=a.data,s=a.loading,l=a.error,j=Object(c.useState)(!1),d=Object(i.a)(j,2),u=d[0],b=d[1];return n||s?Object(h.jsx)(m,{}):o||l?Object(h.jsx)("p",{children:"An error occurred."}):t?Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)(S.a,{open:u,onClose:function(){return b(!1)},className:"modal-container",children:Object(h.jsx)(V,{locations:t.locations,reports:null===r||void 0===r?void 0:r.reports})}),Object(h.jsx)("div",{className:"vax-map",children:Object(h.jsx)(y,{locations:t.locations,reports:null===r||void 0===r?void 0:r.reports})}),Object(h.jsx)("div",{className:"gutters",children:Object(h.jsx)(I.a,{variant:"contained",color:"primary",className:"button--fw",onClick:function(){return b(!0)},children:"Add Entry"})}),Object(h.jsx)(p,{locations:t.locations,reports:null===r||void 0===r?void 0:r.reports})]}):Object(h.jsx)("p",{children:"Records not found."})},K=new(n(125).a)({uri:"http://localhost:4000/graphql"});a.a.render(Object(h.jsx)(w.ApolloProvider,{client:K,children:Object(h.jsx)(J,{})}),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.cd0ff083.chunk.js.map